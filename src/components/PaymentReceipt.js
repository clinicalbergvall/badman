import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
export function PaymentReceipt({ booking, onClose }) {
    const handlePrint = () => {
        window.print();
    };
    const handleShare = async () => {
        const receiptUrl = window.location.href;
        if (navigator.share) {
            try {
                await navigator.share({
                    title: 'CleanCloak Receipt',
                    text: `Receipt for booking #${booking.id?.slice(-8)}`,
                    url: receiptUrl
                });
            }
            catch (err) {
                console.log('Share cancelled');
            }
        }
        else {
            navigator.clipboard.writeText(receiptUrl);
            alert('Receipt link copied to clipboard!');
        }
    };
    const formatDate = (dateString) => {
        if (!dateString)
            return 'N/A';
        return new Date(dateString).toLocaleString('en-KE', {
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
        });
    };
    const totalAmount = booking.price;
    const platformFee = Math.round(totalAmount * 0.6);
    const cleanerEarnings = Math.round(totalAmount * 0.4);
    return (_jsx("div", { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 print:bg-white", children: _jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-h-[90vh] overflow-y-auto print:shadow-none print:w-full", children: [_jsxs("div", { className: "bg-gradient-to-r from-yellow-500 to-yellow-600 text-white p-6 print:bg-yellow-500", children: [_jsxs("div", { className: "flex items-center justify-between mb-4 print:mb-2", children: [_jsxs("div", { className: "flex items-center gap-3", children: [_jsx("div", { className: "text-4xl", children: "\u2705" }), _jsxs("div", { children: [_jsx("h2", { className: "text-2xl font-bold", children: "Payment Successful!" }), _jsx("p", { className: "text-yellow-100 text-sm", children: "Thank you for your business" })] })] }), _jsx("button", { onClick: onClose, className: "text-white hover:bg-yellow-600 rounded-full p-2 transition print:hidden text-xl", children: "\u2715" })] }), _jsxs("div", { className: "bg-yellow-600 bg-opacity-50 rounded-lg p-4 space-y-2", children: [_jsxs("div", { className: "flex justify-between text-sm", children: [_jsx("span", { className: "text-yellow-100", children: "Transaction ID" }), _jsx("span", { className: "font-mono font-semibold", children: booking.transactionId || 'Processing...' })] }), _jsxs("div", { className: "flex justify-between text-sm", children: [_jsx("span", { className: "text-yellow-100", children: "Payment Date" }), _jsx("span", { className: "font-semibold", children: formatDate(booking.paidAt) })] })] })] }), _jsxs("div", { className: "p-6 space-y-6", children: [_jsxs("div", { children: [_jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2", children: "\uD83D\uDCCB Service Details" }), _jsxs("div", { className: "bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3", children: [_jsxs("div", { className: "grid grid-cols-2 gap-4", children: [_jsxs("div", { children: [_jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "Service Type" }), _jsx("p", { className: "font-medium text-gray-900 dark:text-white capitalize", children: booking.serviceCategory?.replace('-', ' ') })] }), _jsxs("div", { children: [_jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "Booking Type" }), _jsx("p", { className: "font-medium text-gray-900 dark:text-white capitalize", children: booking.bookingType })] })] }), booking.scheduledDate && (_jsxs("div", { className: "flex items-center gap-2 text-sm", children: ["\uD83D\uDCC5 ", _jsxs("span", { className: "text-gray-700 dark:text-gray-300", children: ["Scheduled: ", booking.scheduledDate, " ", booking.scheduledTime && `at ${booking.scheduledTime}`] })] })), booking.location?.address && (_jsxs("div", { className: "flex items-start gap-2 text-sm", children: ["\uD83D\uDCCD ", _jsx("span", { className: "text-gray-700 dark:text-gray-300", children: booking.location.address })] }))] })] }), booking.cleaner && (_jsxs("div", { children: [_jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2", children: "\uD83D\uDC64 Service Provider" }), _jsxs("div", { className: "bg-gray-50 dark:bg-gray-700 rounded-lg p-4", children: [_jsx("p", { className: "font-medium text-gray-900 dark:text-white", children: booking.cleaner.name }), _jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: booking.cleaner.phone })] })] })), _jsxs("div", { children: [_jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2", children: "\uD83D\uDCB0 Payment Breakdown" }), _jsxs("div", { className: "bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-2", children: [_jsxs("div", { className: "flex justify-between text-sm", children: [_jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Service Charge" }), _jsxs("span", { className: "font-medium text-gray-900 dark:text-white", children: ["KSh  ", totalAmount.toLocaleString()] })] }), _jsxs("div", { className: "flex justify-between text-xs text-gray-500 dark:text-gray-500", children: [_jsx("span", { children: "\u2022 Platform Fee (60%)" }), _jsxs("span", { children: ["KSh ", platformFee.toLocaleString()] })] }), _jsxs("div", { className: "flex justify-between text-xs text-gray-500 dark:text-gray-500", children: [_jsx("span", { children: "\u2022 Cleaner Earnings (40%)" }), _jsxs("span", { children: ["KSh ", cleanerEarnings.toLocaleString()] })] }), _jsx("div", { className: "border-t border-gray-300 dark:border-gray-600 pt-2 mt-2", children: _jsxs("div", { className: "flex justify-between font-bold text-lg", children: [_jsx("span", { className: "text-gray-900 dark:text-white", children: "Total Paid" }), _jsxs("span", { className: "text-yellow-600 dark:text-yellow-500", children: ["KSh ", totalAmount.toLocaleString()] })] }) })] })] }), booking.rating && (_jsxs("div", { children: [_jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-3", children: "Your Rating" }), _jsxs("div", { className: "bg-gray-50 dark:bg-gray-700 rounded-lg p-4", children: [_jsxs("div", { className: "flex items-center gap-2 mb-2", children: [_jsx("div", { className: "flex", children: Array.from({ length: 5 }).map((_, i) => (_jsx("span", { className: i < booking.rating ? 'text-yellow-400' : 'text-gray-300', children: "\u2B50" }, i))) }), _jsxs("span", { className: "text-sm font-medium text-gray-700 dark:text-gray-300", children: [booking.rating, "/5"] })] }), booking.review && (_jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-400 italic", children: ["\"", booking.review, "\""] }))] })] })), _jsxs("div", { className: "flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700 print:hidden", children: [_jsx("button", { onClick: handlePrint, className: "flex-1 flex items-center justify-center gap-2 bg-gray-100 dark:bg-gray-700 \n                       hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 \n                       font-semibold py-3 px-4 rounded-lg transition duration-200", children: "\uD83D\uDDA8\uFE0F Print" }), _jsx("button", { onClick: handleShare, className: "flex-1 flex items-center justify-center gap-2 bg-gray-100 dark:bg-gray-700 \n                       hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 \n                       font-semibold py-3 px-4 rounded-lg transition duration-200", children: "\uD83D\uDCE4 Share" }), _jsx("button", { onClick: onClose, className: "flex-1 bg-yellow-500 hover:bg-yellow-600 text-white font-semibold \n                       py-3 px-4 rounded-lg transition duration-200 shadow-md hover:shadow-lg", children: "Close" })] }), _jsxs("div", { className: "text-center text-xs text-gray-500 dark:text-gray-400 pt-4 border-t border-gray-200 dark:border-gray-700", children: [_jsx("p", { children: "Thank you for choosing CleanCloak!" }), _jsx("p", { className: "mt-1", children: "For support, contact us at support@cleancloak.co" })] })] })] }) }));
}
